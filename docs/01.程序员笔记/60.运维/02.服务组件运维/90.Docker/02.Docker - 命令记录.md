---
date: 2021-10-27 14:16:37
permalink: /pages/086726/
author: 
  name: 熊猫代码
  link: https://pandacode.cn
tags: 
  - null
title: Docker - 命令记录
---

# Docker - 命令记录

> [docker 命令](https://www.runoob.com/docker/docker-command-manual.html)

## 1. 基础命令

| 命令                                                    | 说明                                                         |
| ------------------------------------------------------- | ------------------------------------------------------------ |
| `docker -v`                                             | 查看docker版本。                                             |
| `docker version`                                        | 查看docker详细信息。                                         |
| `docker pull \<镜像名称>`                               | 获取镜像                                                     |
| `docker images`                                         | 查看docker下载的镜像。                                       |
| `docker rmi <your-image-id>`                            | 通过镜像的 ID 删除镜像。可批量删除：`docker rmi <your-image-id> <your-image-id> ...`;可一次删除所有镜像：`docker rmi $(docker images -q)`。 |
| `docker rm $(docker ps -a -q)`                          | 一次删除所有停止的容器。                                     |
| `docker ps`                                             | 查看正在运行的容器。                                         |
| `docker start/restart/stop  \<CONTAINER IDNAME\>`       | 启动/重启/停止 容器。                                        |
| `docker rm \<CONTAINER ID\|NAME\> \<CONTAINER IDNAME\>` | 删除单个或多个容器。ps：容器停止才能删除。。                 |
|                                                         |                                                              |
|                                                         |                                                              |
|                                                         |                                                              |
|                                                         |                                                              |
|                                                         |                                                              |

## 2. docker 启动jar包

### 2.1. 编写dockerFile文件

```dockerfile
# 引用哪个镜像，没有镜像则pull
FROM centos:7
# 为Dockerfile中所有RUN、CMD、ENTRYPOINT、COPY和ADD指令设定工作目录
WORKDIR /usr
# 执行命令(这里创建了一个目录)
RUN mkdir /usr/local/java
# 和copy一样，复制文件到指定目录，但是copy不能解压，add自动解压
ADD jdk-8u111-linux-x64.tar.gz /usr/local/java
# 重命名(不知道文件名可以现在宿主机解压后看一下)
RUN ln -s /usr/local/java/jdk1.8.0_111 /usr/local/java/jdk 
# 设置环境变量 
ENV JAVA_HOME /usr/local/java/jdk 
ENV JRE_HOME ${JAVA_HOME}/jre 
ENV CLASSPATH .:${JAVA_HOME}/lib:${JRE_HOME}/lib 
ENV PATH ${JAVA_HOME}/bin:$PATH 

# 创建一个目录
RUN mkdir /demo
# 将jar包copy到指定目录
ADD job.jar /demo/app.jar
# 启动命令
ENTRYPOINT ["java","-Djava.security.egd=file:/dev/./urandom","-jar","-Xmx512m","-Xms512m","/demo/app.jar"]

```

### 2.2. 下载需要的外部包

​		这个场景我只用到了jdk。

### 2.3. 执行dockerFile文件，构建镜像

```shell
docker build -t my/demo .
```

**注意最后的 .**  表示 Dockerfile 文件在当前目录下

my/demo  构建之后镜像名称

### 2.4. 运行容器

```shell
docker run -d --name demo -p 8080:8080 my/demo
```



## **关于 Docker** 镜像**的更多信息：**

- [Docker ](https://www.freecodecamp.org/news/docker-image-guide-how-to-remove-and-delete-docker-images-stop-containers-and-remove-all-volumes/)镜像[指南](https://www.freecodecamp.org/news/docker-image-guide-how-to-remove-and-delete-docker-images-stop-containers-and-remove-all-volumes/)
- [Docker ](https://www.freecodecamp.org/news/where-are-docker-images-stored-docker-container-paths-explained/)镜像[存储在哪里](https://www.freecodecamp.org/news/where-are-docker-images-stored-docker-container-paths-explained/)

## **关于 Docker 容器的更多信息：**

- [如何自动化部署 Docker 容器](https://www.freecodecamp.org/news/automate-docker-container-deployment-via-maven-53a855e26d3e/)
- [如何修复 Docker 容器](https://www.freecodecamp.org/news/how-to-find-and-fix-docker-container-vulnerabilities-in-2020/)

## **关于 Docker 的更多信息：**

- [Docker 入门指南](https://www.freecodecamp.org/news/a-beginners-guide-to-docker-how-to-create-your-first-docker-application-cc03de9b639f/)
- [Docker DevOps 课程（视频）](https://www.freecodecamp.org/news/docker-devops-course/)
- [Docker 101：从创建到部署](https://www.freecodecamp.org/news/docker-101-creation-to-deployment/)

## 参考文档

- [如何删除 Docker 镜像和容器](https://chinese.freecodecamp.org/news/how-to-remove-images-in-docker/)
